{"version":3,"sources":["../../../../components/ui/card.tsx","../../../../app/backoffice/players/%5Buid%5D/page.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n","\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useParams, useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { backofficeFetch } from \"@/lib/backoffice/client\"\n\nexport default function BackofficePlayerDetailPage() {\n  const params = useParams<{ uid: string }>()\n  const router = useRouter()\n  const uid = Array.isArray(params.uid) ? params.uid[0] : params.uid\n\n  const [data, setData] = useState<any | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [saving, setSaving] = useState(false)\n\n  const load = async () => {\n    if (!uid) return\n    try {\n      setError(null)\n      setLoading(true)\n      const res = await backofficeFetch<any>(`/api/backoffice/players/${uid}`)\n      setData(res)\n    } catch (e: any) {\n      setError(e?.message || \"Error al cargar\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    load()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [uid])\n\n  const setStatus = async (status: \"active\" | \"disabled\") => {\n    try {\n      setSaving(true)\n      await backofficeFetch(`/api/backoffice/players/${uid}/status`, {\n        method: \"POST\",\n        body: JSON.stringify({ status }),\n      })\n      await load()\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const deleteAccount = async () => {\n    if (!uid) return\n    if (!window.confirm(\"¿Eliminar esta cuenta? Esta acción no se puede deshacer.\")) return\n    try {\n      setSaving(true)\n      await backofficeFetch(`/api/backoffice/players/${uid}/delete`, {\n        method: \"POST\",\n      })\n      router.push(\"/backoffice/players\")\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-start justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl font-semibold text-slate-900\">Jugador</h1>\n          <p className=\"text-sm text-black mt-1 font-mono\">{uid}</p>\n        </div>\n        <Button variant=\"outline\" onClick={() => router.back()}>\n          Volver\n        </Button>\n      </div>\n\n      {loading ? <div className=\"text-black\">Cargando…</div> : null}\n      {error ? <div className=\"text-sm text-red-600\">{error}</div> : null}\n\n      {data?.user ? (\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n          <Card className=\"border border-slate-200/70 shadow-sm\">\n            <CardHeader>\n              <CardTitle className=\"text-base text-slate-900\">Perfil</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 text-sm\">\n              <div><span className=\"text-black\">Email:</span> {data.user.email || \"—\"}</div>\n              <div><span className=\"text-black\">Nombre:</span> {data.user.name || data.user.displayName || data.player?.name || \"—\"}</div>\n              <div><span className=\"text-black\">Rango de edad:</span> {data.player?.ageRange || \"—\"}</div>\n              <div><span className=\"text-black\">Nivel de juego:</span> {data.player?.level || data.player?.skillLevel || \"—\"}</div>\n              <div><span className=\"text-black\">Género:</span> {data.player?.gender || \"—\"}</div>\n              <div><span className=\"text-black\">Estado:</span> {data.user.status || \"active\"}</div>\n\n              <div className=\"pt-3 flex gap-2\">\n                <Button\n                  className=\"bg-blue-600 hover:bg-blue-700\"\n                  disabled={saving}\n                  onClick={() => setStatus(\"active\")}\n                >\n                  Reactivar\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  disabled={saving}\n                  onClick={() => setStatus(\"disabled\")}\n                >\n                  Pausar\n                </Button>\n                <Button\n                  variant=\"destructive\"\n                  disabled={saving}\n                  onClick={deleteAccount}\n                >\n                  Eliminar cuenta\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"border border-slate-200/70 shadow-sm\">\n            <CardHeader>\n              <CardTitle className=\"text-base text-slate-900\">Reservas (MVP)</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {Array.isArray(data.bookings) && data.bookings.length ? (\n                <div className=\"overflow-auto\">\n                  <table className=\"w-full text-sm\">\n                    <thead>\n                      <tr className=\"text-left text-black\">\n                        <th className=\"py-2\">ID</th>\n                        <th className=\"py-2\">Estado</th>\n                        <th className=\"py-2\">Ruta</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {data.bookings.map((b: any) => (\n                        <tr key={b.id} className=\"border-t border-slate-100\">\n                          <td className=\"py-2 font-mono text-xs text-slate-800\">{b.id}</td>\n                          <td className=\"py-2\">{b.status || \"—\"}</td>\n                          <td className=\"py-2 font-mono text-xs text-black\">{b.path}</td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              ) : (\n                <div className=\"text-sm text-black\">No se encontraron reservas.</div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      ) : null}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}