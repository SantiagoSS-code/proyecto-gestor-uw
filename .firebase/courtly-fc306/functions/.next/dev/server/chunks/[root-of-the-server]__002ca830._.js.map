{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/santisanchez/Documents/GitHub/proyecto-gestor-uw/app/api/geo/search/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\n\nexport async function GET(request: Request) {\n  const { searchParams } = new URL(request.url)\n  const query = searchParams.get(\"q\")?.trim()\n  const postalcode = searchParams.get(\"postalcode\")?.trim()\n  const countrycodes = searchParams.get(\"countrycodes\")?.trim()\n  const limit = Number(searchParams.get(\"limit\") || \"10\")\n\n  if (!query && !postalcode) {\n    return NextResponse.json([])\n  }\n\n  const url = new URL(\"https://nominatim.openstreetmap.org/search\")\n  if (postalcode) {\n    url.searchParams.set(\"postalcode\", postalcode)\n  } else if (query) {\n    url.searchParams.set(\"q\", query)\n  }\n  if (countrycodes) {\n    url.searchParams.set(\"countrycodes\", countrycodes.toLowerCase())\n  }\n  url.searchParams.set(\"format\", \"jsonv2\")\n  url.searchParams.set(\"addressdetails\", \"1\")\n  url.searchParams.set(\"limit\", String(Math.min(Math.max(limit, 1), 25)))\n\n  const response = await fetch(url.toString(), {\n    headers: {\n      \"User-Agent\": \"Courtly/1.0\",\n      \"Accept-Language\": \"es\",\n    },\n    next: { revalidate: 3600 },\n  })\n\n  if (!response.ok) {\n    return NextResponse.json([], { status: response.status })\n  }\n\n  const data = await response.json()\n  return NextResponse.json(data)\n}"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,OAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,QAAQ,aAAa,GAAG,CAAC,MAAM;IACrC,MAAM,aAAa,aAAa,GAAG,CAAC,eAAe;IACnD,MAAM,eAAe,aAAa,GAAG,CAAC,iBAAiB;IACvD,MAAM,QAAQ,OAAO,aAAa,GAAG,CAAC,YAAY;IAElD,IAAI,CAAC,SAAS,CAAC,YAAY;QACzB,OAAO,wTAAY,CAAC,IAAI,CAAC,EAAE;IAC7B;IAEA,MAAM,MAAM,IAAI,IAAI;IACpB,IAAI,YAAY;QACd,IAAI,YAAY,CAAC,GAAG,CAAC,cAAc;IACrC,OAAO,IAAI,OAAO;QAChB,IAAI,YAAY,CAAC,GAAG,CAAC,KAAK;IAC5B;IACA,IAAI,cAAc;QAChB,IAAI,YAAY,CAAC,GAAG,CAAC,gBAAgB,aAAa,WAAW;IAC/D;IACA,IAAI,YAAY,CAAC,GAAG,CAAC,UAAU;IAC/B,IAAI,YAAY,CAAC,GAAG,CAAC,kBAAkB;IACvC,IAAI,YAAY,CAAC,GAAG,CAAC,SAAS,OAAO,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,OAAO,IAAI;IAElE,MAAM,WAAW,MAAM,MAAM,IAAI,QAAQ,IAAI;QAC3C,SAAS;YACP,cAAc;YACd,mBAAmB;QACrB;QACA,MAAM;YAAE,YAAY;QAAK;IAC3B;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,OAAO,wTAAY,CAAC,IAAI,CAAC,EAAE,EAAE;YAAE,QAAQ,SAAS,MAAM;QAAC;IACzD;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO,wTAAY,CAAC,IAAI,CAAC;AAC3B"}}]
}